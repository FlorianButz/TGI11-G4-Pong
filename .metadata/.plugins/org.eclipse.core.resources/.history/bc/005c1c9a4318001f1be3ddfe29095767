package de.demoncore.main;

import de.demoncore.audio.AudioMaster;
import de.demoncore.audio.MusicManager;
import de.demoncore.audio.OnMusicVolumeChangeListener;
import de.demoncore.game.GameLogic;
import de.demoncore.game.Settings;
import de.demoncore.gui.Gui;
import de.demoncore.utils.Resources;

public class Main {

	public static String version = "0.0.27a";
	
	public static void main(String[] args) {
			
		AudioMaster.InitializeOpenAL();

		Resources.LoadResources();
		Settings.LoadAllSettings();
		
		MusicManager.InitializeMusicManager();
		AudioMaster.AddOnMusicVolumeChangeListener(new OnMusicVolumeChangeListener() {
			@Override
			public void OnMusicVolumeChange(float volume) {
				MusicManager.SetRealVolume(volume);
			}
		});
		
		System.setProperty("sun.java2d.opengl", "true"); // Setze es auf true nachher
		
		// VolatileImage class benutzen anstatt buffered image !!!!!!
		
		// Musik HINZUFÃœGEN
		
		GameLogic gl = new GameLogic();
		new Gui(gl);
		
		Gui.AddOnApplicationClose(new java.awt.event.WindowAdapter() {
		    @Override
		    public void windowClosing(java.awt.event.WindowEvent windowEvent) {
		        AudioMaster.DestroyOpenAL();
		    }
		});
	}
	
}
